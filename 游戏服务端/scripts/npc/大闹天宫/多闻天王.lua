-- @Author              : GGELUA
-- @Last Modified by    : baidwwy
-- @Date                : 2022-06-10 04:16:13
-- @Last Modified time  : 2022-07-19 06:33:17

local NPC = {}

function NPC:NPC对话(玩家, i)
    return '你找我有什么事？'
end

function NPC:NPC菜单(玩家, i)
end
function NPC:攻击事件(玩家)
    local r = 玩家:取任务("大闹天宫")
    if r and r.阵营==1 then
        if not self:是否战斗中() then
            self:进入战斗(true)
            local r = 玩家:进入战斗('scripts/war/大闹天宫/多闻天王.lua', self)
            self:进入战斗(false)
            if r then
                self:删除()
            end
        end
    end
end
local _路径 = {
    {
        { 76, 174 },
        { 75, 170 },
        { 75, 167 },
        { 75, 163 },
        { 77, 159 },
        { 78, 156 },
        { 79, 152 },
        { 80, 148 },
        { 80, 145 },
        { 81, 141 },
        { 82, 138 },
        { 83, 134 },
        { 85, 131 },
        { 87, 127 },
        { 89, 123 },
        { 90, 120 },
        { 92, 116 },
        { 95, 113 },
        { 97, 111 },
        { 100, 109 },
        { 103, 106 },
        { 105, 103 },
        { 108, 101 },
        { 110, 99 },
        { 113, 97 },
        { 117, 96 },
        { 121, 96 },
        { 124, 96 },
        { 128, 95 },
        { 131, 95 },
        { 135, 93 },
        { 138, 90 },
        { 140, 88 },
        { 143, 87 },
        { 146, 86 },
        { 150, 85 },
        { 152, 83 },
        { 156, 81 },
        { 160, 80 },
        { 163, 79 },
        { 167, 78 },
        { 170, 77 },
        { 173, 76 },
        { 176, 74 },
        { 180, 71 },
        { 183, 71 },
        { 186, 72 },
        { 190, 72 },
        { 194, 72 },
        { 198, 72 },
        { 201, 73 },
        { 205, 74 },
        { 208, 74 },
        { 212, 76 },
        { 215, 78 },
        { 218, 79 },
        { 222, 79 },
        { 225, 80 },
        { 229, 80 },
        { 233, 81 },
        { 237, 81 },
        { 240, 82 },
        { 244, 83 },
        { 248, 83 },
        { 252, 84 },
        { 255, 85 },
        { 259, 85 },
        { 263, 86 },
        { 266, 86 },
        { 270, 87 },
        { 275, 87 },
        { 279, 86 },
        { 283, 86 },
        { 288, 84 },
        { 291, 83 },
        { 295, 83 },
        { 299, 82 },
        { 303, 82 },
        { 307, 82 },
        { 311, 83 },
        { 316, 84 },
        { 319, 86 },
    },
    {
        { 148, 185 },
        { 154, 181 },
        { 159, 178 },
        { 162, 174 },
        { 166, 170 },
        { 165, 165 },
        { 163, 160 },
        { 161, 154 },
        { 161, 150 },
        { 166, 147 },
        { 171, 147 },
        { 176, 146 },
        { 182, 145 },
        { 187, 144 },
        { 192, 142 },
        { 197, 141 },
        { 201, 137 },
        { 205, 133 },
        { 209, 129 },
        { 213, 125 },
        { 217, 122 },
        { 220, 118 },
        { 226, 115 },
        { 231, 113 },
        { 236, 111 },
        { 242, 110 },
        { 247, 109 },
        { 252, 110 },
        { 257, 111 },
        { 262, 114 },
        { 268, 116 },
        { 273, 120 },
        { 278, 122 },
        { 284, 125 },
        { 289, 128 },
        { 294, 127 },
        { 300, 126 },
        { 305, 125 },
        { 311, 124 },
        { 316, 124 },
        { 322, 123 },
        { 327, 122 },
        { 333, 122 },
    },
    {
        { 172, 215 },
        { 171, 216 },
        { 176, 218 },
        { 182, 220 },
        { 187, 222 },
        { 193, 223 },
        { 198, 225 },
        { 204, 227 },
        { 209, 229 },
        { 214, 231 },
        { 220, 232 },
        { 225, 234 },
        { 231, 236 },
        { 236, 237 },
        { 242, 238 },
        { 247, 238 },
        { 253, 238 },
        { 258, 238 },
        { 264, 239 },
        { 269, 240 },
        { 275, 240 },
        { 280, 240 },
        { 286, 239 },
        { 291, 238 },
        { 297, 237 },
        { 302, 236 },
        { 308, 235 },
        { 313, 233 },
        { 318, 232 },
        { 324, 232 },
        { 329, 231 },
        { 335, 231 },
        { 339, 226 },
        { 342, 222 },
        { 346, 218 },
        { 350, 215 },
        { 356, 212 },
        { 361, 209 },
        { 366, 207 },
        { 366, 201 },
        { 366, 196 },
        { 367, 190 },
        { 364, 186 },
        { 360, 180 },
        { 357, 175 },
        { 355, 170 },
        { 353, 164 },
        { 357, 159 },
        { 361, 154 },
        { 364, 149 },
        { 368, 144 },
        { 371, 140 },
        { 375, 136 },
        { 380, 135 },
        { 385, 132 },
        { 390, 129 },
        { 395, 127 },
    }






}
function NPC:NPC更新(sec)
    if self.行走开关 and not self.战斗中 then
        self.rect:置坐标(self.x, self.y)
        if sec > self.行走时间 then
            self.行走时间 = sec + math.random(3)
            if not self.路径 then
                self.路径 = 复制表(_路径[self.路]) --1下中上
            end
            local t = self.路径[1]
            if t then
                table.remove(self.路径, 1)
                if #self.路径 == 0 then
                    self.行走开关 = false
                    扣除箭塔耐久(1,self.路, "花果山")
                    self:删除()
                end
                --  self:切换外形(1)
                self.x, self.y = t[1] * 20 + math.random(50), self.当前地图.h - (t[2] * 20 + math.random(50))
                self.X, self.Y = self.x // 20, self.y // 20
                for _, v in self.当前地图:遍历玩家() do
                    if self:检查点(v.x, v.y) then
                        v.rpc:NPC移动(self.nid, self.x, self.y, 1)
                    end
                end
            end
        end
    end
end

function NPC:NPC给予(玩家, cash, items)
    return '你给我什么东西？'
end

return NPC
